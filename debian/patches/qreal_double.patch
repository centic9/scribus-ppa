Description: Avoid qreal/double type clashes on ARM
Author: Colin Watson <cjwatson@ubuntu.com>
Acked-By: Mattia Rizzolo <mattia@mapreri.org>
Bug-Debian: https://bugs.debian.org/707882
Forwarded: no
Last-Update: 2013-05-16

Index: git/scribus/scribus.h
===================================================================
--- git.orig/scribus/scribus.h	2015-03-01 16:34:00.883538891 +0100
+++ git/scribus/scribus.h	2015-03-01 16:34:00.875538841 +0100
@@ -466,7 +466,7 @@
 	/** Fragt nach den Farben */
 //	void GetBrushPen();
 	/** Erzeugt einen Rahmen */
-	void MakeFrame(int f, int c, double *vals);
+	void MakeFrame(int f, int c, qreal *vals);
 	//** Loescht ein Element */
 	//void DeleteObjekt();
 	/** Duplicate current item */
Index: git/scribus/pageitem.cpp
===================================================================
--- git.orig/scribus/pageitem.cpp	2015-03-01 16:34:00.883538891 +0100
+++ git/scribus/pageitem.cpp	2015-03-01 16:34:00.875538841 +0100
@@ -4662,7 +4662,7 @@
 
 
 //Moved from View
-void PageItem::SetFrameShape(int count, double *vals)
+void PageItem::SetFrameShape(int count, qreal *vals)
 {
 	PoLine.resize(0);
 	for (int a = 0; a < count-3; a += 4)
@@ -4685,7 +4685,7 @@
 
 void PageItem::SetRectFrame()
 {
-	static double rect[] = {  0.0,   0.0,   0.0,   0.0,
+	static qreal rect[] = {  0.0,   0.0,   0.0,   0.0,
 							100.0,   0.0, 100.0,   0.0,
 							100.0,   0.0, 100.0,   0.0,
 							100.0, 100.0, 100.0, 100.0,
@@ -4700,7 +4700,7 @@
 
 void PageItem::SetOvalFrame()
 {
-	static double rect[] = {   100.0,  50.0, 100.0,       77.615235,
+	static qreal rect[] = {   100.0,  50.0, 100.0,       77.615235,
 								50.0, 100.0,  77.615235, 100.0,
 								50.0, 100.0,  22.385765, 100.0,
 								 0.0,  50.0,   0.0,       77.615235,
Index: git/scribus/pageitem.h
===================================================================
--- git.orig/scribus/pageitem.h	2015-03-01 16:34:00.883538891 +0100
+++ git/scribus/pageitem.h	2015-03-01 16:34:00.875538841 +0100
@@ -298,7 +298,7 @@
 	void DrawObj_PathText(ScPainter *p, double sc);
 public:
 	void DrawObj_Embedded(ScPainter *p, QRectF e, const CharStyle& style, PageItem* cembedded);
-	void SetFrameShape(int count, double *vals);
+	void SetFrameShape(int count, qreal *vals);
 	void SetRectFrame();
 	void SetOvalFrame();
 	void SetFrameRound();
Index: git/scribus/propertiespalette.cpp
===================================================================
--- git.orig/scribus/propertiespalette.cpp	2015-03-01 16:34:00.883538891 +0100
+++ git/scribus/propertiespalette.cpp	2015-03-01 16:34:00.875538841 +0100
@@ -4622,7 +4622,7 @@
 			doc->setRedrawBounding(CurItem);
 			break;
 		default:
-			CurItem->SetFrameShape(c, (double*)vals);
+			CurItem->SetFrameShape(c, vals);
 			doc->setRedrawBounding(CurItem);
 			CurItem->FrameType = f+2;
 			break;
Index: git/scribus/scribusdoc.h
===================================================================
--- git.orig/scribus/scribusdoc.h	2015-03-01 16:34:00.883538891 +0100
+++ git/scribus/scribusdoc.h	2015-03-01 16:34:00.875538841 +0100
@@ -1006,7 +1006,7 @@
 	DocumentInformation documentInfo;
 	int appMode;
 	int SubMode;
-	double *ShapeValues;
+	qreal *ShapeValues;
 	int ValCount;
 	QString DocName;
 	QMap<QString,int> UsedFonts;
Index: git/scribus/canvasmode_create.cpp
===================================================================
--- git.orig/scribus/canvasmode_create.cpp	2015-03-01 16:34:00.883538891 +0100
+++ git/scribus/canvasmode_create.cpp	2015-03-01 16:34:00.879538878 +0100
@@ -122,7 +122,7 @@
 		{
 			FPointArray poly;
 			int valCount = m_doc->ValCount;
-			double *vals = m_doc->ShapeValues;
+			qreal *vals = m_doc->ShapeValues;
 			for (int a = 0; a < valCount-3; a += 4)
 			{
 				if (vals[a] < 0)
Index: git/scribus/scribus.cpp
===================================================================
--- git.orig/scribus/scribus.cpp	2015-03-01 16:34:00.883538891 +0100
+++ git/scribus/scribus.cpp	2015-03-01 16:34:00.879538878 +0100
@@ -7617,7 +7617,7 @@
 }
 */
 //CB-->??
-void ScribusMainWindow::MakeFrame(int f, int c, double *vals)
+void ScribusMainWindow::MakeFrame(int f, int c, qreal *vals)
 {
 	PageItem *currItem = doc->m_Selection->itemAt(0);
 	switch (f)
Index: git/scribus/plugins/imposition/imposition.cpp
===================================================================
--- git.orig/scribus/plugins/imposition/imposition.cpp	2015-03-01 16:34:00.883538891 +0100
+++ git/scribus/plugins/imposition/imposition.cpp	2015-03-01 16:34:00.879538878 +0100
@@ -542,7 +542,7 @@
 					}
 					groupcontrol->SetRectFrame();
 					
-					double points[32] = {
+					qreal points[32] = {
 					//left upper corner - left lower corner
 					targetDoc->Pages->at(0)->guides.vertical(1,targetDoc->Pages->at(0)->guides.Standard),
 					targetDoc->Pages->at(0)->guides.horizontal(0,targetDoc->Pages->at(i)->guides.Standard),
@@ -730,7 +730,7 @@
 					}
 					groupcontrol->SetRectFrame();
 					
-					double points[32] = {
+					qreal points[32] = {
 					//left upper corner - left lower corner
 					0,
 					0,
@@ -893,7 +893,7 @@
 					}
 					groupcontrol->SetRectFrame();
 					
-					double points[32] = {
+					qreal points[32] = {
 					//left upper corner - left lower corner
 					0,
 					0,
@@ -1047,7 +1047,7 @@
 					}
 					groupcontrol->SetRectFrame();
 					
-					double points[32] = {
+					qreal points[32] = {
 					//left upper corner - left lower corner
 					targetDoc->Pages->at(0)->guides.vertical(1,targetDoc->Pages->at(0)->guides.Standard),
 					targetDoc->Pages->at(0)->guides.horizontal(0,targetDoc->Pages->at(i)->guides.Standard),
